# declares which docker image should be used
# https://docs.gitlab.com/ee/ci/docker/using_docker_images.html#what-is-an-image
image: maven:3-jdk-8

# Cache downloaded dependencies and plugins between builds.
cache:
  paths:
    - .m2/

variables:
  MAVEN_OPTS: -Dmaven.repo.local=${CI_PROJECT_DIR}/.m2

# we run just the test goal because the dependency to the de.htwg.swqs.catalog project
# can not be fulfilled in the ci environment
maven:test:
  stage: test
  script:
  - "mvn test --batch-mode"
  - "cat target/site/jacoco/index.html"
  - "mv target/*.jar ."
